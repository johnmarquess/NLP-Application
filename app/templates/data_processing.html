<!-- data_processing.html -->
{% extends 'base.html' %}
{% block title %}Data Processing{% endblock %}
{% block content %}
    <div class="container mt-lg-5">
    <h1 class="mb-lg-5">Data pre-processing</h1>
    <div class="row">
        <div class="col-md-6">
            <h3>Model selection and processing Options</h3>
            <p>Choose the model and the options you want to use for pre-processing</p>
            <p>After you have selected the model and the options, click the <strong>Process Data</strong> button to
                pre-process the data</p>
            <label class="form-label">Select a spaCy model</label>
            <form action="{{ url_for('file_manager.file_manager') }}" method="post" enctype="multipart/form-data">
                {{ model_form.hidden_tag() }}
                <!-- Assuming the model select field in your form -->

                {{ model_form.model(class="form-select mb-3", id="model-select") }}
            </form>

            <form method="post">
                {{ preprocess_form.hidden_tag() }}

                <span id="columns-url" style="display:none;"
                      data-url="{{ url_for('data_processor.get_columns', filename='') }}"></span>

                <div class="mb-3">
                    <label class="form-label">Select a file to process</label>
                    {{ preprocess_form.file(class="form-select", id="file-select") }}

                </div>

                <div class="mb-3">
                    <label class="form-label">And a colum from that file</label>
                    {{ preprocess_form.column_to_preprocess(class="form-select", id="column-select") }}
                </div>
                <h5 class="form-label">Choose your processing options</h5>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-check">
                            {{ preprocess_form.lemmatize(class="form-check-input", id="lemmatize") }}
                            <label for="lemmatize" class="form-check-label">Lemmatize</label>
                        </div>
                        <div class="form-check">
                            {{ preprocess_form.remove_stopwords(class="form-check-input", id="remove-stopwords") }}
                            <label for="remove-stopwords" class="form-check-label">Remove Stopwords</label>
                        </div>
                        <div class="form-check">
                            {{ preprocess_form.lowercase(class="form-check-input", id="lowercase") }}
                            <label for="lowercase" class="form-check-label">Make lowercase</label>
                        </div>
                        <div class="form-check">
                            {{ preprocess_form.remove_punctuation(class="form-check-input", id="remove-punctuation") }}
                            <label for="remove-punctuation" class="form-check-label">Remove Punctuation</label>
                        </div>
                    </div>
                    <!-- Second Column -->
                    <div class="col-md-6">
                        <div class="form-check">
                            {{ preprocess_form.remove_spaces(class="form-check-input", id="remove-spaces") }}
                            <label for="remove-spaces" class="form-check-label">Remove Spaces</label>
                        </div>
                        <div class="form-check">
                            {{ preprocess_form.remove_special_chars(class="form-check-input", id="remove_special_chars") }}
                            <label for="remove_special_chars" class="form-check-label">Remove Special
                                Characters</label>
                        </div>
                        <div class="form-check">
                            {{ preprocess_form.remove_newlines(class="form-check-input", id="remove_newlines") }}
                            <label for="remove_newlines" class="form-check-label">Remove Newlines</label>
                        </div>
                    </div>
                </div>
                <div class="mb-3">
                    <label for="store-as" class="form-label">Store As</label>
                    {{ preprocess_form.store_as(class="form-select", id="store-as") }}
                </div>
                <div class="mb-3">
                    {{ preprocess_form.output_filename(class="form-control", placeholder="Output filename") }}
                </div>
                <form method="post">
                    <input type="submit" name="process_submit" value="Process Data"
                           class="btn btn-outline-primary btn-sm">
                </form>
            </form>
        </div>


        <div class="col-md-6">
            <h3>Pre-processing and model settings summary</h3>
            <p>This displays after file processing</p>
            {% if summary %}
                <table class="table">
                    <tr>
                        <th>Feature</th>
                        <th>Value</th>
                    </tr>
                    {% for key, value in summary.items() %}
                        <tr>
                            <td>{{ key }}</td>
                            <td>{{ value }}</td>
                        </tr>
                    {% endfor %}
                </table>
            {% endif %}
        </div>
    </div>


    <h3 class="mt-lg-3">First five rows of selected and processed text</h3>
    <p>This displays after file processing</p>

        {% if table_html %}
            <div class="col-md-12 table-noto">
            {{ table_html | safe }}
            </div>
        {% endif %}

{% endblock %}

