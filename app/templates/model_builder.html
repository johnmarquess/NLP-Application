{% extends 'base.html' %}
{% block content %}
    <div class="container">
        <h2>Select Data for Modeling</h2>
        <form method="post">
            {{ data_form.hidden_tag() }}
            <span id="columns-url" style="display:none;" data-url="{{ url_for('model_builder.get_columns', filename='') }}"></span>

            <!-- File Selector -->
            <div class="form-group">
                <label for="file-select">Select File</label>
                {{ data_form.file(class="form-select", id='model-builder-file-select') }}
            </div>

            <!-- Column Selector -->
            <div class="form-group">
                <label for="column-select">Select Column</label>
                {{ data_form.column(class="form-select", id='model-builder-column-select') }}
            </div>

            <!-- Checkbox for Select All Columns -->
            <div class="form-check">
                {{ data_form.all_columns(id="model-builder-all-columns-check", class="form-check-input") }}
                <label class="form-check-label" for="model-builder-all-columns-check">Select All Columns</label>
            </div>

            <button type="submit" name="data_submit" class="btn btn-primary">Submit</button>
        </form>

        <div class="container">
            <h2>Select NLP Modeling Approach</h2>
            <form method="post" id="model-selection-form">
                {{ model_form.hidden_tag() }}
                {% for subfield in model_form.model_type %}
                    <div class="form-check">
                        {{ subfield(onchange="submitForm()", class="form-check-input") }}
                        {{ subfield.label(class="form-check-label") }}
                    </div>
                {% endfor %}
            </form>
        </div>
    </div>

    {% if table_html %}
        <div class="col-md-12 table-noto">
            {{ table_html | safe }}
        </div>
    {% endif %}



    <script>
        function submitForm() {
            document.getElementById('model-selection-form').submit();
        }
    </script>
{% endblock %}
